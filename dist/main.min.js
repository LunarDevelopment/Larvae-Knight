!function(){"use strict";function e(){}e.prototype={preload:function(){this.load.image("preloader","assets/preloader.gif")},create:function(){this.game.input.maxPointers=1,this.game.device.desktop?this.game.scale.pageAlignHorizontally=!0:(this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.minWidth=480,this.game.scale.minHeight=260,this.game.scale.maxWidth=640,this.game.scale.maxHeight=480,this.game.scale.forceOrientation(!0),this.game.scale.pageAlignHorizontally=!0,this.game.scale.setScreenSize(!0)),this.game.state.start("preloader")}},window.larvaeknight=window.larvaeknight||{},window.larvaeknight.Boot=e}(),function(){"use strict";function e(){}var a,t,s,i=[];e.prototype={create:function(){var e=this;e.game.stage.backgroundColor="#1873CE",a=e.game.add.group(),e.game.physics.isoArcade.gravity.setTo(0,0,-500),a.enableBody=!0;var o=[];o[0]="water",o[1]="sand",o[2]="grass",o[3]="stone",o[4]="wood",o[5]="watersand",o[6]="grasssand",o[7]="sandstone",o[8]="bush1",o[9]="bush2",o[10]="mushroom",o[11]="wall",o[12]="window";for(var n,r=[9,2,1,1,4,4,1,6,2,10,2,2,6,1,0,4,4,0,0,2,2,2,6,1,0,0,4,4,0,0,8,8,2,0,0,0,0,4,4,0,0,0,9,2,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,11,11,12,11,3,3,11,12,11,11,11,3,7,3,3,3,3,3,3,7,3,3,7,1,7,7,3,3,7,7,1,1,7],d=32,h=0,g=d;g<=e.game.physics.isoArcade.bounds.frontY-d;g+=d)for(var l=d;l<=e.game.physics.isoArcade.bounds.frontX-d;l+=d)n=e.game.add.isoSprite(l,g,o[r[h]].match("water")?0:e.game.rnd.pick([2,3,4]),"tileset",o[r[h]],a),n.anchor.set(.5,1),n.smoothed=!1,n.body.moves=!1,4===r[h]&&(n.isoZ+=6),r[h]<=10&&(r[h]<5||r[h]>6)&&(n.scale.x=e.game.rnd.pick([-1,1])),0===r[h]&&i.push(n),h++;s=e.game.add.isoSprite(75,138,0,"larvaeknight","sprite15",a),s.animations.add("wbl",["sprite17","sprite18"],3,!0,!1),s.anchor.set(.4,.2),e.game.physics.isoArcade.enable(s),s.body.collideWorldBounds=!0,s.animations.play("wbl"),e.cursors=e.game.input.keyboard.createCursorKeys(),e.game.input.keyboard.addKeyCapture([Phaser.Keyboard.LEFT,Phaser.Keyboard.RIGHT,Phaser.Keyboard.UP,Phaser.Keyboard.DOWN,Phaser.Keyboard.SPACEBAR]);var c=e.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);c.onDown.add(function(){s.body.velocity.z=300},e),t=new Phaser.Plugin.Isometric.Point3},update:function(){var e=this;e.game.iso.unproject(e.game.input.activePointer.position,t),i.forEach(function(a){a.isoZ=-2*Math.sin(.004*(e.game.time.now+7*a.isoX))+-1*Math.sin(.005*(e.game.time.now+8*a.isoY)),a.alpha=Phaser.Math.clamp(1+.1*a.isoZ,.2,1)}),a.forEach(function(a){var s=a.isoBounds.containsXY(t.x,t.y);!a.selected&&s?(console.log(i),console.log(a),a.selected=!0,a.tint=8830938,e.game.add.tween(a).to({},200,Phaser.Easing.Quadratic.InOut,!0)):a.selected&&!s&&(a.selected=!1,a.tint=16777215,e.game.add.tween(a).to({},200,Phaser.Easing.Quadratic.InOut,!0))})},render:function(){var e=this;e.game.debug.text("Move your mouse around!",2,36,"#ffffff"),e.game.debug.text(e.game.time.fps||"--",2,14,"#a7aebe")},onInputDown:function(){}},window.larvaeknight=window.larvaeknight||{},window.larvaeknight.Game=e}(),window.addEventListener("load",function(){"use strict";var e=window.larvaeknight,a=new Phaser.Game(640,480,Phaser.AUTO,"larvaeknight-game");a.state.add("boot",e.Boot),a.state.add("preloader",e.Preloader),a.state.add("menu",e.Menu),a.state.add("game",e.Game),a.state.start("boot")},!1),function(){"use strict";function e(){}e.prototype={create:function(){var e=this.add.text(.5*this.game.width,.5*this.game.height,"MENU",{font:"42px Arial",fill:"#ffffff",align:"center"});e.anchor.set(.5),this.input.onDown.add(this.onDown,this)},update:function(){},onDown:function(){this.game.state.start("game")}},window.larvaeknight=window.larvaeknight||{},window.larvaeknight.Menu=e}(),function(){"use strict";function e(){this.asset=null,this.ready=!1}e.prototype={preload:function(){this.asset=this.add.sprite(.5*this.game.width-110,.5*this.game.height-10,"preloader"),this.load.setPreloadSprite(this.asset),this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.loadResources(),this.game.time.advancedTiming=!0,this.game.debug.renderShadow=!1,this.game.stage.disableVisibilityChange=!0,this.game.plugins.add(new Phaser.Plugin.Isometric(this.game)),this.game.physics.startSystem(Phaser.Plugin.Isometric.ISOARCADE),this.game.iso.anchor.setTo(.5,.1),this.ready=!0},loadResources:function(){this.game.load.atlasJSONHash("larvaeknight","../assets/LarvaeKnight.png","../assets/LarvaeKnight.json"),this.game.load.atlasJSONHash("tileset","../assets/tileset.png","../assets/tileset.json"),this.game.load.image("tile","../assets/tile.png")},create:function(){},update:function(){this.game.state.start("menu")},onLoadComplete:function(){}},window.larvaeknight=window.larvaeknight||{},window.larvaeknight.Preloader=e}();